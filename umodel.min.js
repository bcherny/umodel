(function(){var a,b,c,d={}.hasOwnProperty;c={extend:function(a,b){var c;for(c in b)d.call(b,c)&&(a[c]=b[c]);return a},trim:function(){var a,b;return"".trim?function(a){return a.trim()}:(a=/^\s\s*/,b=/\s\s*$/,function(c){return c.replace(a,"").replace(b,"")})}()},a=function(){function a(a,b){this._data=null!=a?a:{},this.options={separator:"/"},b&&c.extend(this.options,b),this.events={}}return a.prototype.get=function(a){return this.trigger("get",a),this._get(this._split(a))},a.prototype.set=function(a,b){return this.trigger("set",a),this._set(this._split(a),b)},a.prototype.setnx=function(a,b){return this.trigger("setnx",a),this._set(this._split(a),b,!0)},a.prototype.on=function(a,b){var c,d;if(b)return this._on(a,b);d=[];for(c in a)b=a[c],d.push(this._on(c,b));return d},a.prototype.trigger=function(a,b){var c,d,e,f,g;if(null==b&&(b="*"),b=this._normalize(b),a in this.events){f=this.events[a],g=[];for(c in f)e=f[c],"*"===c||0===(b+"/").indexOf(c+"/")?g.push(function(){var a,c,f;for(f=[],a=0,c=e.length;c>a;a++)d=e[a],f.push(d.call(this,b,void 0,this));return f}.call(this)):g.push(void 0);return g}},a.prototype._get=function(a,b,c){var d;if(null==b&&(b=this._data),null==c&&(c=[]),d=a.shift()){if(!(d in b))throw new Error('get: key "'+d+'" does not exist in "'+c.join("/")+'"');return c.push(d),this._get(a,b[d],c)}return b},a.prototype._set=function(a,b,c,d,e){var f;return null==c&&(c=!1),null==d&&(d=this._data),null==e&&(e=[]),f=a.shift(),a.length?(f in d||(d[f]={}),e.push(f),this._set(a,b,c,d[f],e)):c&&f in d?void 0:d[f]=b},a.prototype._on=function(a,b){var d,e,f,g,h,i,j;for(f=a.split(":"),e=f[0].split(" "),g=this._normalize(f[1]||"*"),j=[],h=0,i=e.length;i>h;h++)d=e[h],d=c.trim(d),d in this.events||(this.events[d]={}),g in this.events[d]||(this.events[d][g]=[]),j.push(this.events[d][g].push(b));return j},a.prototype._normalize=function(a){var b;return b=this.options.separator,a=c.trim(a),a.charAt(0)===b&&(a=a.slice(1)),a.charAt(a.length-1)===b&&(a=a.slice(0,-1)),a},a.prototype._split=function(a){return this._normalize(a).split(this.options.separator)},a}(),b=function(a,b){return"object"==typeof exports?module.exports=b:"function"==typeof define&&define.amd?define(a,[],function(){return b}):this[a]=b},b("umodel",a)}).call(this);